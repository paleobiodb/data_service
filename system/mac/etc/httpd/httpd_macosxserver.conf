##
## Copyright (c) 2002 Apple Computer, Inc.  All Rights Reserved
##
## httpd_macosxserver.conf -- Apache httpd server configuration file.
##
## This file is "Included" by the Mac OS X Server version of the main Apache
## config file, httpd.conf. You can safely make modifications to that file as long
## as you heed the X-Server-specific comments we have added to that file.
##
## This file is updated programmatically by the serversettingsd process (on this machine)
## under control of the Server Settings application (on this machine or some other machine).
## You can make changes to this file directly, if you follow these guidelines.
## If you don't follow them, the risk is that Server Settings won't work,
## and that Apache will fail to start.
##
## 1. Be sure to save a backup copy before making changes.
##
## 2. Don't edit this file while also editing the configuration with the 
## Server Settings application. (Server Settings can be running, just
## don't do "Configure Web Service...".)
##
## 3. Don't delete any pseudo-comments, which are lines that look like this:
##
##     #AutoStartServer Off
##     #<RAdmin 101>
##     #</RAdmin>
##     #<SSLSupport>
##     #</SSLSupport>
##     #<DAVSupport>
##     #</DAVSupport>
##     #<TomcatSupport>
##     #</TomcatSupport>
##    
## and so on. These are ignored by Apache but many of them are used by
## Server Settings. If you add comments, make sure they don't look like the
## pseudo-comments.
##
## 4. Don't add or delete any virtual host blocks directly; add or delete
## them with Server Settings.
##
## 5. Use Server Settings whenever possible; restrict your manual edits
## to adding lines within existing virtual host blocks created by
## Server Settings. And don't manually modify directives that are obviously
## generated by Server Settings, such as:
##	NameVirtualHost
##	Listen
##	ServerName
##	ServerAdmin
##	DocumentRoot
##	DirectoryIndex
##	CustomLog
##	ErrorLog
##	SSLEngine
## etc.
##
## 6. Don't comment out directives. The "Enable" checkbox in the Sites
## panel within Server Settings operates by commenting and uncommenting
## entire virtual host blocks; try not to interfere with this mechanism.
##
## 7. Don't modify the CustomLog, ErrorLog, or SSLLog directives; if you
## want to change them, use Server Settings to turn logging *off* and add a
## second logging directive after the one that it generates.  Specifically:
## Server Settings generates a log directive like this when the
## "Enable access log" box us unchecked:
##
##	CustomLog "/dev/null" "%h %l %u %t \"r\" %>s %b"
##
## Leave that one alone, and add your own directive right after it:
##
##	CustomLog "/dev/null" "%h %l %u %t \"r\" %>s %b"
##	CustomLog "/private/var/log/httpd/access_log" "%v %h %l %u %t \"r\" %>s %b"
##
## It's also possible to configure logging on a global basis (rather than for specific
## virtual hosts) in the httpd.conf file; if you do, you should disable logging for
## all virtual hosts, using Server Settings.
##
## 8. Don't change the port numbers in the virtual hosts. When Server Settings is used
## to enable the performance cache, it adds 16000 to the port numbers, so port 80 
## becomes 16080. This is correct behavior; the webperfcached process is listening on the
## original port and relaying requests to Apache at the 16000+ port when necessary.
##
## 9. Consider putting your added directives in one or more new config files,
## and adding a single "Include" directive to each virtual host specifying the
## appropriate new config file.
##	
## 10. After making changes and exiting the text editor, make sure that
## Server Settings can still operate correctly: Browse the configuration
## with the "Configure Web Service..." menu item in the Web module, and make
## sure you can do a "Save" operation without error dialogs.
##
## 11. Use Server Settings to restart Apache to pick up the changes.
##
## Performance tips: For maximum performance:
##   - Performance cache should be enabled.
##   - mod_include should be turned off (add -Include to Options)
##   - The "htaccess" override mechanism should be disabled (AllowOverride None)
##   - Logging should be turned off (/dev/null)
##   - mod_proxy should be disabled (ProxyRequests Off)
##   - mod_status should be deinstalled.

## The following 2 lines are pseudo-comments ignored by Apache but
## used by Server Settings.
#
#AutoStartServer On
#DefaultRealmAuthor no-user

## The following section controls SSL. When "Enable SSL support" is 
## checked/unchecked in the Server Settings app, the SSLSupport lines get
## uncommented/commented here automatically.
##
## getsslpassphrase is a shell script that prints out the password used to 
## decrypt the private key (ex: server.key), i.e., the RSA or DSA Private 
## Key file attached to the PEM-encoded Certificate file (ex: server.crt). 
## Note: double-quotes cannot be used in the paths below!
##
## A SSLCipherSuite value of:       Key-ex  Auth    Encryp  MAC-digest
## "RSA:-HIGH:-MEDIUM:-LOW:+EXP" -> RSA     RSA     40-56   SHA1-MD5
## "ALL"                         -> DH-RSA  DSS-RSA 40-168  SHA1-MD5
##
## Note that "%h %l %u %t %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %>s %b"
## is generally used as the format string for access log.
##
## Do not modify these directly; use Server Settings.
#
#<SSLSupport>
#LoadModule ssl_module /usr/libexec/httpd/libssl.so
#AddModule mod_ssl.c
#</SSLSupport>

## It's OK to modify these directly.
#
<IfModule mod_ssl.c>
SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown
SSLPassPhraseDialog exec:/private/etc/httpd/getsslpassphrase
SSLSessionCache dbm:/private/var/log/httpd/ssl_scache
SSLSessionCacheTimeout 300
SSLMutex file:/private/var/log/httpd/ssl_mutex
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
SSLLogLevel info
</IfModule>

##
## The directives below provide default values that Server Settings
## may use when it creates new sites. This site must always
## be disabled (commented) and Server Settings should never delete it.
## Server Settings will also use this site to create the first default
## site at post-install time.
##
## For each site (virtual host), Server Settings creates a block 
## bracketed with #<RAdmin> pseudo-directives. These are ignore by
## Apache but are used by Server Settings. When Server Settings is
## used to enable/disable a specific site, the Apache directives
## within the block are uncommented/commented. The actual site blocks 
## appear after the "#RAdminCounter" pseudo-comment.
##
## Do not modify these directly.
#
#<RAdmin 99>
#NameVirtualHost 128.111.220.138:80
#Listen 128.111.220.138:80
#<VirtualHost 128.111.220.138:80>
#ServerName paleobackup.nceas.ucsb.edu
#WebPerfCacheEnable On
#SiteAutomaticallyDisabled Off
#ServerAdmin webmaster@example.com
#DocumentRoot "/Library/WebServer/Documents"
#DirectoryIndex index.html index.php
#CustomLog "/private/var/log/httpd/access_log" "%{PC-Remote-Addr}i %l %u %t \"%r\" %>s %b"
#ErrorLog "/private/var/log/httpd/error_log"
#<IfModule mod_ssl.c>
#SSLEngine Off
#SSLLog "/private/var/log/httpd/ssl_engine_log"
#SSLCertificateChainFile "/private/etc/httpd/ssl.crt/ca.crt"
#SSLCertificateFile "/private/etc/httpd/ssl.crt/server.crt"
#SSLCertificateKeyFile "/private/etc/httpd/ssl.key/server.key"
#SSLCipherSuite "RSA:-HIGH:-MEDIUM:-LOW:+EXP"
#SSLPassPhrase paleobackup.nceas.ucsb.edu:80 ""
#</IfModule>
#<IfModule mod_jserv.c>
#Alias /WebMail/ "/Library/Tomcat/webapps/WebMail/aqua_html/"
#</IfModule>
#<IfModule mod_dav.c>
#DAVLockDB "/private/var/run/davlocks/.davlock"
#DAVMinTimeout 600
#</IfModule>
#<Directory "/Library/WebServer/Documents">
#Options All +MultiViews -ExecCGI -Indexes
#AllowOverride None
#<IfModule mod_dav.c>
#DAV Off
#</IfModule>
#</Directory>
#</VirtualHost>
#</RAdmin>

## Most directives defined below override those defined in httpd.conf 
## httpd configuration file.
## Note that servers status pages can only be queried locally.
##

## Do not modify these directly; use Server Settings.
#
#<DAVSupport>
#LoadModule dav_module /usr/libexec/httpd/libdav.so
#AddModule mod_dav.c
#</DAVSupport>

## Do not modify these directly; use Server Settings.
#
#<TomcatSupport>
#LoadModule jserv_module /usr/libexec/httpd/mod_jserv.so
#AddModule mod_jserv.c
#Include /private/etc/httpd/tomcat.conf
#</TomcatSupport>

ServerName flatpebble.nceas.ucsb.edu
Port 9010
Listen 9010
DocumentRoot "/private/tmp"
ErrorLog "/private/var/log/httpd/error_log"

<Directory "/private/tmp">
Order Deny,Allow
Deny from All
Allow from 127.0.0.1
</Directory>

<Location /server-status>
SetHandler server-status
Order deny,allow
Deny from all
Allow from 127.0.0.1
Allow from 128.111.220.135
Allow from 128.111.220.138
</Location>

Sherlock On
ExtendedStatus On
Timeout 1200
KeepAlive On
MaxKeepAliveRequests 500
KeepAliveTimeout 15
MaxClients 500
FancyIndexing on

#ProxyRequests Off
#CacheRoot "/private/var/run/proxy"
#CacheSize 1024
#CacheGcInterval 24

## The section below contains a block for each site (virtual host).
## Server Settings enables or disables a site by uncommenting or commenting
## the Apache directives for that site in this section. It changes the specific
## settings for a site by changing values or commenting/uncommenting directives
## in this section.
##
## It's OK to make certain changes to this section but be sure to follow
## the guidelines shown at the top of this file.
#

#RAdminCounter 101

#<RAdmin 100>
NameVirtualHost 128.111.220.135:80
Listen 128.111.220.135:80
<VirtualHost 128.111.220.135:80>
ServerName flatpebble.nceas.ucsb.edu
#WebPerfCacheEnable Off
#SiteAutomaticallyDisabled Off
ServerAdmin alroy@nceas.ucsb.edu
DocumentRoot "/Volumes/pbdb_RAID/httpdocs/html"
DirectoryIndex index.php index.html
CustomLog "/dev/null" "%h %l %u %t \"%r\" %>s %b"
CustomLog "/private/var/log/httpd/access_log" combined
ErrorLog "/dev/null"
ErrorLog "/private/var/log/httpd/error_log"
<IfModule mod_ssl.c>
SSLEngine Off
SSLLog "/private/var/log/httpd/ssl_engine_log"
#SSLCertificateChainFile "/private/etc/httpd/ssl.crt/ca.crt100"
#SSLCertificateFile "/private/etc/httpd/ssl.crt/server.crt100"
#SSLCertificateKeyFile "/private/etc/httpd/ssl.key/server.key100"
SSLCipherSuite "RSA:-HIGH:-MEDIUM:-LOW:+EXP"
#SSLPassPhrase flatpebble.nceas.ucsb.edu:80 ""
</IfModule>
<IfModule mod_dav.c>
DAVLockDB "/private/var/run/davlocks/.davlock100"
DAVMinTimeout 600
</IfModule>
<Directory "/Volumes/pbdb_RAID/httpdocs/html">
Options All +MultiViews +ExecCGI -Indexes
AllowOverride AuthConfig
<IfModule mod_dav.c>
DAV Off
</IfModule>
</Directory>
</VirtualHost>
#</RAdmin>
































