<script language="JavaScript" type="text/javascript">
<!-- 
function checkFields() {
    var bad_info = "";
    var f = document.forms[1];
  
    var isFloat = /^([0-9]+(\.[0-9]+)?|(\.[0-9]+))$/;
    var minV = f.minimum_body_mass.value;
    var maxV = f.maximum_body_mass.value;
    var estimateV = f.body_mass_estimate.value;
    if (maxV != "" && !isFloat.test(maxV)) {
        bad_info += "Maximum body mass must be a positive decimal number\n";
    }
    if (minV != "" && !isFloat.test(minV)) {
        bad_info += "Minimum body mass must be a positive decimal number\n";
    }
    if (estimateV != "" && !isFloat.test(estimateV)) {
        bad_info += "Body mass estimate must be a positive decimal number\n";
    }

    if (isFloat.test(minV) && isFloat.test(minV)) {
        if (parseFloat(minV) > parseFloat(maxV)) {
            bad_info += "Maximum body mass must be greater than minimum\n";
        }
    }

    if ((minV != "" || maxV != "") && estimateV != "") {
        bad_info += "You can either fill in a body mass range or body mass estimate, but not both\n";
    }
    
    if ((minV != "" && maxV == "") || 
        (minV == "" && maxV != "")) {
        bad_info += "Missing a body mass minimum or maximum value\n";
    }
    

    if ( bad_info != "" ) { 
        bad_info = "Please correct the following errors and submit again:\n" + bad_info;
        alert(bad_info);
        return false; 
    }    
    return true;
} 
-->
</script>


<center>
<p class="pageTitle">Ecology and taphonomy form: <span id="taxon_name"></span></p>
</center>


%%primary_reference%%

<center><p class="small" style="margin-left: 2em; margin-bottom: 2em;"><i>Note: this form is intended for adult morphologies only. Please see the <a href="javascript: tipsPopup('/public/tips/ecology_tips.html')">tip sheet</a>.</i></p></center>

<form method="POST" action="%%write_url%%" onSubmit="return checkFields();">

<input type=hidden name="action" value="startProcessEcologyForm">
<input id="taxon_no" name="taxon_no" type="hidden">
<input id="ecotaph_no" name="ecotaph_no" type="hidden">
<input type="hidden" name="goal" value="ecotaph">

<div class="displayPanel">
<span class="displayPanelHeader">Morphology and development</span>
<div class="displayPanelContent">

<table class="small" cellpadding="8">
  <tr>
    <td valign="top">
      <span class="fieldName">Skeletal composition 1</span>
      <select id="composition1"></select><br>
    </td>
    <td valign="top">
      <span class="fieldName">Skeletal composition 2</span>
      <select id="composition2"></select><br>
    </td>
  </tr>

  <tr>
    <td>
      <span class="fieldName">Relative thickness</span>
      <select id="thickness"></select>
    </td>
    <td>
      <span class="fieldName">Internal skeletal architecture</span>
      <select id="architecture"></select>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <span class="fieldName">3-d form</span>
      <select id="form"></select>
    </td>
    <td valign="top">
      <span class="fieldName">Skeletal reinforcement</span><br>
      <input id="reinforcement" type=checkbox value="no">none (smooth) <i>or...</i><br>
      <nobr>
        folds: <select id="folds"></select>
      </nobr>

      <nobr>
        ribbing: <select id="ribbing"></select>
      </nobr>
      <br>

      <nobr>
        spines: <select id="spines"></select>
      </nobr>

      <nobr>
        internal reinforcement: <select id="internal_reinforcement"></select>
      </nobr>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <span class="fieldName">Adult polymorphism/dimorphism?</span>
      <select id="polymorph"><option value="">no</option><option value="yes">yes</option></select>
      <br>
    </td>
    <td>
      <span class="fieldName">Ontogeny</span><br>
      <!-- new values based on Raup and Stanley? -->
      <input id="ontogeny" type=hidden value="" replace="NO">
      <input id="ontogeny" type=checkbox value="accretion">accretion
      <input id="ontogeny" type=checkbox value="molting">molting
      <input id="ontogeny" type=checkbox value="addition of parts">addition of parts<br>
      <input id="ontogeny" type=checkbox value="modification of parts">modification of parts
      <input id="ontogeny" type=checkbox value="replacement of parts">replacement of parts
    </td>
  </tr>
  <tr>
    <td>
      <span class="fieldName">Social grouping</span>
      <select id="grouping"></select>
    </td>
    <td>
      <span class="fieldName">Clonal?</span>
      <select id="clonal"><option value="">no</option><option value="yes">yes</option></select>
    </td>
  </tr>
</table>

</div>
</div>

<div class="displayPanel">
<span class="displayPanelHeader">Adult size</span>
<div class="displayPanelContent">

<p class="verysmall">"Size" may refer to pollen, seeds, leaves, etc. for plants but only to entire bodies for animals.</p>

<table class="small" cellpadding="8">
  <tr><td colspan="3">
    <table>
      <tr>
        <td colspan="2" valign="top">
          <p class="fieldName">Measurements are of the entire body?
          <select id="entire_body"><option value="">no</option><option value="yes">yes</option></select></p>
        </td>
      </tr>
      <tr>
        <td></td>
        <td colspan="3">
          <p class="fieldName">If no, name of body part: <input id="body_part" size=20></p>
      </tr>
      <tr>
        <td></td>
        <td><span class="small"><u>length</u></span></td>
        <td><span class="small"><u>width</u></span></td>
        <td><span class="small"><u>height</u></span></td>
      </tr>
      <tr>
        <td><span class="fieldName">Size estimate(s):</span></td>
        <td valign="top"><select id="adult_length"></select>
        <td valign="top"><select id="adult_width"></select>
        <td valign="top"><select id="adult_height"></select>
      </tr>
      <tr> 
        <td></td>
        <td></td>
        <td><span class="small"><u>area</u></span></td>
        <td><span class="small"><u>volume</u></span></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td valign="top"><select id="adult_area"></select>
        <td valign="top"><select id="adult_volume"></select>
      </tr>
    </table>
  </td></tr>

  <tr>
    <td colspan=2>
      <span class="fieldName">Body mass range: minimum </span>
      <input id="minimum_body_mass" type="text" size=6>
      <select id="minimum_body_mass_unit" autofill="mass_units"></select>
      <span class="fieldName">to maximum</span>
      <input id="maximum_body_mass" type="text" size=6>
      <select id="maximum_body_mass_unit" autofill="mass_units"></select>
    </td>
  </tr>
  <tr>
    <td colspan=2>
      &nbsp;&nbsp;<i> ... or </i><span class="fieldName">body mass estimate: </span>
      <input id="body_mass_estimate" name="body_mass_estimate" size="8">
      <select id="body_mass_estimate_unit" autofill="mass_units"></select>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <span class="fieldName">Body mass source</span>
      <select id="body_mass_source" name="body_mass_source"></select>
    </td>
    <td>
      <span class="fieldName">Body mass estimate type</span>
      <select id="body_mass_type" name="body_mass_type"></select>
    </td>
  </tr>
  <tr>
    <td colspan=2>
      <span class="fieldName">Body mass comment: </span>
      <input id="body_mass_comment" type="text" name="body_mass_comment" size="40">
    </td>
  </tr>   
</table>

</div>
</div>

<div class="displayPanel">
<span class="displayPanelHeader">Life history and behavior</span>
<div class="displayPanelContent">

<table cellpadding="8">
  <tr>
    <td valign=top><span class="small fieldName">General environment</span></td>
    <td class="small">
      <input id="taxon_environment" type=hidden value="" replace="NO">
      <input id="taxon_environment" type=checkbox value="hypersaline">hypersaline
      <input id="taxon_environment" type=checkbox value="marine">marine
      <input id="taxon_environment" type=checkbox value="brackish">brackish
      <input id="taxon_environment" type=checkbox value="freshwater">freshwater
      <input id="taxon_environment" type=checkbox value="terrestrial">terrestrial
      <br>
      <input id="taxon_environment" type=checkbox value="lagoonal">lagoonal
      <input id="taxon_environment" type=checkbox value="coastal">coastal
      <input id="taxon_environment" type=checkbox value="inner shelf">inner shelf
      <input id="taxon_environment" type=checkbox value="outer shelf">outer shelf
      <input id="taxon_environment" type=checkbox value="oceanic">oceanic

      <br>
      <input id="taxon_environment" type=checkbox value="oligotrophic">oligotrophic
      <input id="taxon_environment" type=checkbox value="mesotrophic">mesotrophic
      <input id="taxon_environment" type=checkbox value="eutrophic">eutrophic
    </td>
  </tr>
</table>

<table class="small" cellpadding="8">
  <tr>
    <td>
      <span class="fieldName">Locomotion</span>
      <select id="locomotion"></select><br>
    </td>
    <td>
      <span class="fieldName">Attached?</span>
      <select id="attached"><option value="">no</option><option value="yes">yes</option></select>
      &nbsp;
      &nbsp;
      <span class="fieldName">Epibiont?</span>
      <select id="epibiont"><option value="">no</option><option value="yes">yes</option></select>
    </td>
  </tr>
  <tr>
    <td>
      <span class="fieldName">Life habit</span>
      <select id="life_habit"></select><br>
    </td>
    <td>
    <span class="fieldName">Depth habitat</span>
      <select id="depth_habitat"></select><br>
    </td>
  </tr>
  <tr>
    <td>
      <span class="fieldName">Diet/feeding mode 1</span>
      <select id="diet1"></select><br>
    </td>
    <td>
      <span class="fieldName">Diet/feeding mode 2</span>
      <select id="diet2"></select><br>
    </td>
  </tr>
  <tr>
    <td>
      <span class="fieldName">Vision</span>
      <select id="vision"></select><br>
    </td>
  </tr>
  <tr>
    <td>
      <span class="fieldName">Reproduction</span>
      <select id="reproduction"></select><br>
    </td>
    <td>
      <span class="fieldName">Asexual?</span>
      <select id="asexual"><option value="">no</option><option value="yes">yes</option></select>
      &nbsp;
      &nbsp;
      <span class="fieldName">Brooding?</span>
      <select id="brooding"><option value="">no</option><option value="yes">yes</option></select>
    </td>
  </tr>
  <tr>
    <td valign="top">
      <span class="fieldName">Dispersal (gametes)</span><br>
      <span class="verysmall">What carries the gametes?</span>
      <!-- does NOT include clones -->
      <select id="dispersal1"></select><br>
    </td>
    <td valign="top">
      <span class="fieldName">Dispersal (larvae/seeds/juveniles)</span>
      <!-- does NOT include clones -->
      <select id="dispersal2"></select><br>
    </td>
  </tr>
</table>

</div>
</div>

<div class="displayPanel">
<span class="displayPanelHeader">Comments</span>
<div class="displayPanelContent" style="padding-bottom: 1em;">
  <textarea id="comments" rows="3" wrap="virtual" cols="90"></textarea>
</div>
</div>

<center><input type=submit value="Submit"></center>

</form>

