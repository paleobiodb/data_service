<script language="JavaScript" type="text/javascript">
<!-- 
function checkFields() {
    var bad_info = "";
    var f = document.forms[1];
  
    var isFloat = /^([0-9]+(\.[0-9]+)?|(\.[0-9]+))$/;
    var minV = f.minimum_body_mass.value;
    var maxV = f.maximum_body_mass.value;
    var estimateV = f.body_mass_estimate.value;
    if (maxV != "" && !isFloat.test(maxV)) {
        bad_info += "Maximum body mass must be a positive decimal number\n";
    }
    if (minV != "" && !isFloat.test(minV)) {
        bad_info += "Minimum body mass must be a positive decimal number\n";
    }
    if (estimateV != "" && !isFloat.test(estimateV)) {
        bad_info += "Body mass estimate must be a positive decimal number\n";
    }

    if (isFloat.test(minV) && isFloat.test(minV)) {
        if (parseFloat(minV) > parseFloat(maxV)) {
            bad_info += "Maximum body mass must be greater than minimum\n";
        }
    }

    if ((minV != "" || maxV != "") && estimateV != "") {
        bad_info += "You can either fill in a body mass range or body mass estimate, but not both\n";
    }
    
    if ((minV != "" && maxV == "") || 
        (minV == "" && maxV != "")) {
        bad_info += "Missing a body mass minimum or maximum value\n";
    }
    

    if ( bad_info != "" ) { 
        bad_info = "Please correct the following errors and submit again:\n" + bad_info;
        alert(bad_info);
        return false; 
    }    
    return true;
} 
-->
</script> 

<center>
<p class="pageTitle">Vertebrate ecology form: <span id="taxon_name"></span></p>
</center>

%%primary_reference%%

<center><p class="small" style="margin-left: 2em; margin-bottom: 2em;"><i>Note: this form is intended for adult morphologies only. Please read the <a href="javascript: tipsPopup('/public/tips/ecology_tips.html')">tip sheet</a>.</i></p></center>

<form method="POST" action="%%write_url%%" onSubmit="return checkFields();">

<input type=hidden name="action" value="startProcessEcologyForm">
<input id="taxon_no" name="taxon_no" type="hidden">
<input id="ecotaph_no" name="ecotaph_no" type="hidden">
<input type="hidden" name="goal" value="ecovert">

<div class="displayPanel">
<span class="displayPanelHeader">Adult size</span>
<div class="displayPanelText">

<p class="verysmall">"Size" may refer to pollen, seeds, leaves, etc. for plants but only to entire bodies for animals.</p>

<table cellpadding="5">
  <tr>
    <td colspan="3">
      <table>
        <tr>
          <td colspan="2" valign="top">
            <p class="small">Measurements are of the entire body? 
            <select id="entire_body"><option value="">no</option><option value="yes">yes</option></select></p>
          </td>
        </tr>
        <tr>
          <td></td>
          <td colspan="3">
            <p class="small">If no, name of body part: <input id="body_part" size=20></p>
        </tr>
        <tr>
          <td></td>
          <td><span class="small"><u>length</u></span></td>
          <td><span class="small"><u>width</u></span></td>
          <td><span class="small"><u>height</u></span></td>
        </tr>
        <tr>
          <td><p class="small">Size estimate(s):</p></td>
          <td valign="top"><select id="adult_length"></select>
          <td valign="top"><select id="adult_width"></select>
          <td valign="top"><select id="adult_height"></select>
        </tr>
        <tr> 
          <td></td>
          <td></td>
          <td><span class="small"><u>area</u></span></td>
          <td><span class="small"><u>volume</u></span></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td valign="top"><select id="adult_area"></select>
          <td valign="top"><select id="adult_volume"></select>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td colspan=2>
      <p class="small">Body mass range: minimum
      <input id="minimum_body_mass" type="text" size=6>
      <select id="minimum_body_mass_unit" autofill="mass_units"></select>
      to maximum
      <input id="maximum_body_mass" type="text" size=6>
      <select id="maximum_body_mass_unit" autofill="mass_units"></select><p>
    </td>
  </tr>
  <tr>
    <td colspan=2>
      &nbsp;&nbsp;<i> ... or </i><p class="small">body mass estimate: 
      <input id="body_mass_estimate" name="body_mass_estimate" size="8">
      <select id="body_mass_estimate_unit" autofill="mass_units"></select></p>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <p class="small">Body mass source
      <select id="body_mass_source" name="body_mass_source"></p>
    </td>
    <td>
      <p class="small">Body mass estimate type</p>
      <select id="body_mass_type" name="body_mass_type">
    </td>
  </tr>
  <tr>
    <td colspan=2>
      <p class="small">Body mass comment: </p>
      <input id="body_mass_comment" type="text" name="body_mass_comment" size="40">
    </td>
  </tr>
  <tr>
    <td valign=top>
      <p class="small">Adult polymorphism/dimorphism?</p>
      <select id="polymorph"><option value="">no</option><option value="yes">yes</option></select>
      <br>
    </td>
    <td>
      <p class="small">Social grouping</p>
      <select id="grouping"></select>
    </td>
  </tr>
</table>

</div>
</div>

<div class="displayPanel">
<span class="displayPanelHeader">Life history and behavior</span>
<div class="displayPanelText">

<table cellpadding="5">
  <tr>
    <td valign=top><p class="small">General environment</p></td>
    <td class="small">
      <input id="taxon_environment" type=hidden value="" replace="NO">
      <input id="taxon_environment" type=checkbox value="hypersaline">hypersaline
      <input id="taxon_environment" type=checkbox value="marine">marine
      <input id="taxon_environment" type=checkbox value="brackish">brackish
      <input id="taxon_environment" type=checkbox value="freshwater">freshwater
      <input id="taxon_environment" type=checkbox value="terrestrial">terrestrial
      <br>
      <input id="taxon_environment" type=checkbox value="lagoonal">lagoonal
      <input id="taxon_environment" type=checkbox value="coastal">coastal
      <input id="taxon_environment" type=checkbox value="inner shelf">inner shelf
      <input id="taxon_environment" type=checkbox value="outer shelf">outer shelf
      <input id="taxon_environment" type=checkbox value="oceanic">oceanic
    </td>
  </tr>
</table>

<table cellpadding=10>
  <tr>
    <td>
      <p class="small">Life habit
      <select id="life_habit" autofill="ecovert_life_habit"></select></p>
    </td>
    <td>
      <p class="small">Vision
      <select id="vision"></select></p>
    </td>
  </tr>
  <tr>
    <td>
      <p class="small">Diet/feeding mode 1
      <select id="diet1" autofill="ecovert_diet"></select></p>
    </td>
    <td>
      <p class="small">Diet/feeding mode 2
      <select id="diet2" autofill="ecovert_diet"></select></p>
    </td>
  </tr>
  <tr>
    <td>
      <p class="small">Reproduction
      <select id="reproduction" autofill="ecovert_reproduction"></select></p>
    </td>
    <td>
      <p class="small">Brooding?
      <select id="brooding"><option value="">no</option><option value="yes">yes</option></select></p>
    </td>
  </tr>
</table>

</div>
</div>


<div class="displayPanel">
<span class="displayPanelHeader">Comments</span>
<div class="displayPanelText">
  <textarea id="comments" rows="3" wrap="virtual" cols="90"></textarea>
</div>
</div>


<center><input type=submit value="Submit"></center>

</form>

